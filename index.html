<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Enterpise JS</title>

    <link rel="stylesheet" href="resources/css/sky.css">
    <link rel="stylesheet" href="resources/css/highlight.css">
    <link rel="stylesheet" href="revealjs/css/reveal.min.css">
    <link rel="stylesheet" href="resources/css/canoo.css">
</head>

<body>

<div class="reveal">

    <div class="slides">

        <section data-background="#ADE4D3">
            <h1>Enterprise JS</h1>
            <br>
            <p>High-Performance Mobile Applications with</p>
            <a href="http://www.backbonejs.org" target="_blank">
            <img src="resources/images/backbone.png" width=500px/>
            </a>
            <br>

            <p style="text-align: right;">
                <small>Oleg Buss, Andreas Hölzl</small>
            </p>

        </section>

        <section data-background="#ADE4D3">
            <section>
                <h2>Who we are</h2>
            </section>
            <section>
                <h2>Canoo Engineering AG</h2>
                <br>
                <ul>
                    <li>50 people | 40 engineers</li>
                    <li>Basel, Switzerland</li>
                    <li>Delivering end-user happiness since 2000</li>
                    <li>Full-stack Java, Mobile, Modern Web</li>
                    <li>RIASuite, Findit, Engineering, Consulting</li>
                </ul>
            </section>
            <section>
                <h2>Oleg</h2>
                <br>
                <div class="vbox">
                        <div class="vbox-item" style="margin-right: 50px;">
                            <img src="resources/images/oleg.jpg" width="200"/>
                        <div>
                        <small><a href="https://github.com/olegomon">github/olegomon</a></small>
                        <small><a href="http://www.twitter.com/olegomon">@olegomon</a></small>

                        </div>
                    </div>
                    <div class="vbox-item">
                        <ul>
                            <li>Senior Engineer</li>
                            <li>HTML5 addict</li>
                            <li>mobile web wizard</li>
                            <li>Thinks <em>"we will all live in the browser"</em></li>
                        </ul>
                    </div>
                </div>
            </section>
            <section>
                <h2>Andreas</h2>
                <br>
                <div class="vbox">
                    <div class="vbox-item" style="margin-right: 50px;">
                        <div>
                            <img src="http://www.gravatar.com/avatar/3a6dc00e490885b8d71804fb1141755c?s=200"/>
                        </div>
                        <small><a href="http://www.twitter.com/andywoodly">@andywoodly</a></small>
                    </div>
                    <div class="vbox-item">
                        <ul>
                            <li>Lead Mobile Engineer</li>
                            <li>Founder of <a href="http://www.wikihood.com">Wikihood</a></li>
                            <li>Initiator of <a href="https://github.com/canoo/dolphin.js">dolphin.js</a></li>
                            <li>Thinks <em>"HTML5 and Android are the future"</em></li>
                        </ul>
                    </div>
                </div>
            </section>
        </section>

        <section data-background="#ADE4D3">
            <section>
                <h2>What we do</h2>
            </section>
            <section>
                <h2>CanooNet Offline</h2>
                <small>native iOS, encryption, spelling correction</small>
                <br>
                <div class="vbox">
                    <div class="vbox-item" style="margin-right: 25px; height: 550px;">
                        <img src="resources/images/cno_search.png"/>
                    </div>
                    <div class="vbox-item">
                        <div class="vbox-item" style="margin-left: 25px; height: 550px">
                            <img src="resources/images/cno_flection.png"/>
                        </div>
                    </div>
                </div>
            </section>
            <section>
                <h2>DSwiss SecureSafe</h2>
                <small>Sencha Touch / PhoneGap, high security, native Android L&F</small>
                <br>
                <div class="vbox">
                    <div class="vbox-item" style="margin-right: 25px; height: 550px;">
                        <img src="resources/images/dswiss_auth.png"/>
                    </div>
                    <div class="vbox-item">
                        <div class="vbox-item" style="margin-left: 25px; height: 550px">
                            <img src="resources/images/dswiss_android.png"/>
                        </div>
                    </div>
                </div>
            </section>
            <!--<section>-->
                <!--<h2>Volta Mobile</h2>-->
                <!--<small>mGWT / PhoneGap, offline, catalogue data, signing</small>-->
                <!--<br>-->
            <!--</section>-->
            <section>
                <h2>Medical Insights</h2>
                <small>backbone.js / PhoneGap, custom UI, content udpate</small>
                <br>
                <div class="vbox">
                    <div class="vbox-item" style="margin-right: 25px; height: 550px;">
                        <img src="resources/images/insights_main.png"/>
                    </div>
                    <div class="vbox-item">
                        <div class="vbox-item" style="margin-left: 25px; height: 550px">
                            <img src="resources/images/insights_agg.png"/>
                        </div>
                    </div>
                </div>
            </section>
            <section>
                <h2>Foxtrail</h2>
                <small>backbone.js / PhoneGap, hardware integration, cross-plattform</small>
                <br>
                <div class="vbox">
                    <div class="vbox-item" style="margin-right: 25px; height: 550px;">
                        <img src="resources/images/foxtrail_android.png"/>
                    </div>
                    <div class="vbox-item">
                        <div class="vbox-item" style="margin-left: 25px; height: 550px">
                            <img src="resources/images/foxtrail_ios.png"/>
                        </div>
                    </div>
                </div>
            </section>
        </section>

        <section data-background="#ADE4D3">
            <section>
                <h2>Mobile Web Development</h2>
            </section>
            <section>
                <h2>Mobile Web Frameworks</h2>
                <br>
                <ul>
                    <li>JQuery Mobile</li>
                    <li>Sencha Touch</li>
                    <li>mGWT</li>
                    <li>backbone.js</li>
                </ul>
            </section>
            <section>
                <h3>JQuery Mobile</h3>
                <br>
                <ul>
                    <li>nice UI components</li>
                    <li>odd page loading concept</li>
                    <li>dialogs as a single page</li>
                    <li>144KB (34KB)</li>
                </ul>
            </section>
            <section>
                <h3>Sencha Touch</h3>
                <br>
                <ul>
                    <li>cross-plattform UI components</li>
                    <li>full mobile framework</li>
                    <li>configuration over programming</li>
                    <li>heavy DOM</li>
                    <li>customization difficult</li>
                    <li>500KB</li>
                </ul>
            </section>
            <section>
                <h3>mGWT</h3>
                <br>
                <ul>
                    <li>cross-plattform, multi-channel</li>
                    <li>few UI components</li>
                    <li>plattform optimized code</li>
                    <li>slow iteration cycles, complex</li>
                </ul>
            </section>
            <section>
                <h3>backbone.js</h3>
                <br>
                <ul>
                    <li>lightweight</li>
                    <li>flexible</li>
                    <li>just MVC, no components</li>
                </ul>
            </section>
        </section>

        <section data-background="#ADE4D3">
            <section>
                <h2>Performance Considerations</h2>
                <br>
                <small>http://www.netmagazine.com/features/speeding-mobile-html5-experiences</small>
                <br>
                <ul>
                    <li>don't use frameworks</li>
                    <li>shallow DOM</li>
                    <li>CSS3 where possible</li>
                    <li>small resource footprint</li>
                    <li>modularization, testable code</li>
                    <li>fast iteration cycles</li>
                    <li>continuous integration</li>
                </ul>
            </section>
        </section>

        <section data-background="#ADE4D3">
            <section>
                <h2>Agenda</h2>
                <br>
                <ul>
                    <li>Modularization</li>
                    <li>Build automatization</li>
                    <li>External libraries</li>
                    <li>Testing</li>
                    <li>Backbone.js MVC - I</li>
                </ul>
                <p style="margin: 20px;">
                <em>lunch break</em>
                </p>
                <ul>
                    <li>Backbone.js MVC - II</li>
                    <li>deferred / promise</li>
                    <li>native apps / Cordova</li>
                    <li>misc advanced topics</li>
                    <li>outlook dolphin.js</li>
                </ul>
            </section>
        </section>

        <section>
            <section>
                <h2>Modularization</h2>
                <br>
                <small>Module Pattern, AMD, Require.js</small>
            </section>
            <section>
                <h3>Object Literal</h3>
                <br>
                <pre><code data-trim class="javascript">
var myObjectLiteral = {

    variableKey: variableValue,

    functionKey: function () {
        // ...
    };
};
                </code></pre>
            </section>
            <section>
                <h3>Module Pattern</h3>
                <br>
                <pre><code data-trim class="javascript">
var testModule = (function () {

    var counter = 0;

    return {
        incrementCounter: function () {
        return counter++;
    },

    resetCounter: function () {
        console.log( "counter value prior to reset: " + counter );
        counter = 0;
    }
};

})();

// Usage:

// Increment our counter
testModule.incrementCounter();

// Check the counter value and reset
// Outputs: 1
testModule.resetCounter();
                </code></pre>
            </section>
            <section>
                <h3>Module Pattern - Mixins</h3>
                <br>
                <pre><code data-trim class="javascript">
// Global module
var myModule = (function ( jQ, _ ) {

    function privateMethod1(){
        jQ(".container").html("test");
    }

    function privateMethod2(){
        console.log( _.min([10, 5, 100, 2, 1000]) );
    }

    return{
        publicMethod: function(){
            privateMethod1();
        }
    };

// Pull in jQuery and Underscore
}( jQuery, _ ));

myModule.publicMethod();
                </code></pre>
            </section>
            <section>
                <h3>Script loading</h3>
                <br>
                <h4>synchronous</h4>
                <pre><code data-trim>
&lt;head&gt;
    <script src=”core.js” type=”text/javascript”></script>
    <script src=”more.js” type=”text/javascript”></script>
&lt;/head&gt;
                </code></pre>
                <h4>asynchronous</h4>
                <pre><code data-trim class="javascript">
var script = document.createElement('script');

var firstScript = document.getElementsByTagName('script')[0];

script.src = "http://example.com/myscript.min.js";

firstScript.parentNode.insertBefore( script, firstScript );
                </code></pre>

                <h4>require()</h4>
                <pre><code data-trim class="javascript">
require( [ window.JSON ? undefined : 'util/json2' ], function ( JSON ) {
    JSON = JSON || window.JSON;
    console.log( JSON.parse( '{ "JSON" : "HERE" }' ) );
});
                </code></pre>
            </section>
            <section>
                <h3>AMD - Asynchronous Module Definition</h3>
                <br>
                <h4>module definition</h4>
                <pre><code data-trim class="javascript">
define(
    module_id /*optional*/,
    [dependencies] /*optional*/,
    definition function /*function for instantiating
                            the module or object*/
);
                </code></pre>
                <h4>module example</h4>
                <pre><code data-trim class="javascript">
define(
    "myModule",
    ["math", "graph"],
    function ( math, graph ) {
        return {
            plot: function( x, y ){
                return graph.drawPie( math.randomGrid( x, y ) );
            }
        };
    }
);
                </code></pre>
            </section>
            <section>
                <h3>Dynamically loaded dependencies</h3>
                <br>
                <pre><code data-trim class="javascript">
define(function ( require ) {
    var isReady = false, foobar;

    require(["foo", "bar"], function ( foo, bar ) {
        isReady = true;
        foobar = foo() + bar();
    });

    return {
        isReady: isReady,
        foobar: foobar
    };
});
                </code></pre>
            </section>
            <section>
                <h3>Require.JS</h3>
                <br>
                <pre><code data-trim class="javascript">
require([
    "app/myModule"
], function( myModule ){
    // main module and dependent modules are loaded
    var module = new myModule();
    module.doStuff();
});
                </code></pre>
            </section>

            <section>
                <h3>Require.JS - Setup</h3>
                <br>
                <small>src/config.js</small>
                <pre><code data-trim class="javascript">
require.config({
    baseUrl: 'app',
    paths  : {
        'app': '../app'
    },
    shims  : {}
});
require(['app']); // run the app
                </code></pre>
                <small>src/index.html</small>
                <pre><code data-trim>
    &lt;script data-main="config.js"
        src="scripts/requirejs/require.js"&gt;&lt;/script&gt;
&lt;/body&gt;
                </code></pre>
                <small>src/app.js</small>
                <pre><code data-trim class="javascript">
define([
    // dependencies
], function(/*references*/){
    // your app start point
});
                </code></pre>
            </section>
            <section>
                <h2>References</h2>
                <br>
                <ul>
                    <li><a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/" target="_blank">JavaScript design patterns</a></li>
                    <li><a href="http://addyosmani.com/writing-modular-js/" target="_blank">Writing modular JavaScript</a></li>
                    <li><a href="http://msdn.microsoft.com/en-us/magazine/hh227261.aspx" target="_blank">Importance of script loaders</a></li>
                    <li><a href="http://requirejs.org/docs/whyamd.html" target="_blank">Why AMD?</a></li>
                </ul>
            </section>
        </section>

        <!--<section data-background="#B2B6E4">-->
            <!--<h2>Exercise 1 - Require.js</h2>-->
            <!--<br>-->
            <!--<small>-->
                <!--Refactor the list editing application into separate AMD modules.-->
            <!--</small>-->
        <!--</section>-->

        <section>
            <section>
                <h2>Integrating external libraries</h2>
                <br>
                <small></small>
            </section>
        </section>

<!------------------ Testing ------------------>

        <section>
            <section>
                <h2>Testing</h2>
                <br>
                <small><a href="http://docs.busterjs.org/en/develop/" target="_blank">buster.js</a></small>
            </section>
            <section>
                <h3>Setup</h3>
                <br>
                <small>Buster.JS on the command-line requires Node.js 0.6.3 or newer and npm.</small>
                <h5>Installation - buster.js</h5>
                <pre><code data-trim>
npm install -g buster
                </code></pre>
                <h5>Installation - buster-AMD</h5>
                <pre><code data-trim>
npm install -g buster-amd
                </code></pre>
            </section>
            <section>
                <h5>Configuration (with AMD)</h5>
                <br>
                <small>test/buster.js</small>
                <pre><code data-trim class="javascript">
var config = module.exports;

config["Browser Tests"] = {
    rootPath   : "..",
    environment: "browser", // or "node"

    autoRun: false,

    extensions: [
        require("buster-amd")
    ],

    libs: [
        "src/scripts/requirejs/require.js",
        "test/main-setup.js"
    ],

    sources: [
        "src/app/**/*.js"
    ],

    tests: [
        "test/app/**/*-test.js"
    ]
};
                </code></pre>
            </section>
            <section>
                <h5>Configuration (with AMD) cont.</h5>
                <br>
                <small>test/main-setup.js</small>
                <pre><code data-trim class="javascript">
// Require.js configuration
require.config({

    baseUrl: '',

    paths: {
        controller : 'src/app/controller',
        models     : 'src/app/models',
        views      : 'src/app/views'
    },

    shim : {
    }

});

require([], function () {
    console.log("INIT DONE");
});
                </code></pre>
            </section>
            <section>
                <h3>Setup (cont.)</h3>
                <br>
                <h5>Test server</h5>
                <pre><code data-trim>
% buster server
                </code></pre>
                <h5>Test client registration</h5>
                <img src="resources/images/buster-server-capture.png">
                <h5>Test execution</h5>
                <pre><code data-trim>
% buster test
                </code></pre>
            </section>
            <section>
                <h3>Writing tests</h3>
                <br>
                <pre><code data-trim class="javascript">
define([
    'buster',
    'models/Model'
], function (buster, Model) {

    var assert = buster.assertions.assert;
    var refute = buster.assertions.refute;

    buster.testCase("Model tests ...", {
        "my nested test scenario ..." : {
            "setUp": function () {
                // optional setup
            },

            "tearDown": function () {
                // optional tear down
            },

            "my tested feature ...": function () {
                assert(true);
            }
        },
    }
});
                </code></pre>
            </section>
            <section>
                <h3>Headless tests (e.g. CI server)</h3>
                <br>
                <small>with <a href="http://phantomjs.org/" target="_blank">phantom.js</a></small>
                <pre><code data-trim>
buster-server
# on a separate terminal
phantomjs ./node_modules/buster/script/phantom.js &
buster-test
                </code></pre>
            </section>
        </section>

        <!--<section data-background="#B2B6E4">-->
            <!--<h2>Exercise 2 - buster.js</h2>-->
            <!--<br>-->
            <!--<small>-->
                <!--Write a simple test for the Model class-->
            <!--</small>-->
        <!--</section>-->

        <section>
            <section>
                <h2>Build automatization</h2>
                <br>
                <h5><a href="http://gruntjs.com/" target="_blank">grunt.js</a></h5>
                <br>
                <h5>Demo</h5>
            </section>
        </section>

<!------------------ Backbone / Model ------------------>

        <section>
            <section>
                <h2>Backbone.js</h2>
                <br>
                <h5><a href="http://backbonejs.org/#Model" target="_blank">Model</a></h5>
            </section>
            <section>
                <h3>Model - Instantiation</h3>
                <br>
                <small>Backbone models contain data and optionally the logic around this data.</small>
                <br>
                <small>Models can be created by extending <em>Backbone.Model</em>.</small>
                <br>
                <h5>Empty model</h5>
                <pre><code data-trim class="javascript">
// define a new generic Item model
var Item = Backbone.Model.extend({});
// create instance with no values
var item1 = new Item();
                </code></pre>
                <h5>Initialized model</h5>
                <pre><code data-trim class="javascript">
// instance with 'name' and 'date' field
var item2 = new Item({
    name: 'My Item',
    date: '2013-07-22'
});
console.log(item2.toJSON());
                </code></pre>
            </section>
            <section>
                <h3>Model - Construction</h3>
                <br>
                <small>Backbone models provides an optional <em>constructor()</em> method.</small>
                <br>
                <pre><code data-trim class="javascript">
return Backbone.Model.extend({

    constructor: function() {
        // do something with arguments object
        // e.g. parameter validation / conversion

        // call 'super'
        Backbone.Model.apply(this, arguments);
    },

});
                </code></pre>
            </section>
            <section>
                <h3>Model - Initialization</h3>
                <br>
                <small>Backbone models provides an optional <em>initialize()</em> method.</small>
                <br>
                <small><em>initialize()</em> is executed <strong>after</strong> object construction.</small>
                <pre><code data-trim class="javascript">
return Backbone.Model.extend({

    initialize: function() {
        // initialize extra model properties
    },

});
                </code></pre>
            </section>
            <section>
                <h3>Model - Default values</h3>
                <br>
                <small>When creating an instance of the model, any unspecified attributes will be set to their default value.</small>
                <pre><code data-trim class="javascript">
var Todo = Backbone.Model.extend({
    // Default todo attribute values
    defaults: {
        title: '',
        completed: false
    }
});

// create instance with default values
var todo1 = new Todo();

// create instance with custom title
var todo2 = new Todo({
    title: 'my custom title'
});
                </code></pre>
            </section>
            <section>
                <h3>Model - Getter / Setter</h3>
                <br>
                <h5>Getter</h5>
                <pre><code data-trim class="javascript">
var Todo = Backbone.Model.extend({
    defaults: {
        title: '',
        completed: false
    }
});

var todo1 = new Todo();
var title = todo1.get('title');
                </code></pre>
                <h5>Setter</h5>
                <pre><code data-trim class="javascript">
var todo1 = new Todo();
// set a single attribute
todo1.set('title', 'new title);

// set multiple attributes
todo1.set({
    title: 'new title,
    completed: true
});
                </code></pre>
            </section>
            <section>
                <h3>Model - Change notification</h3>
                <br>
                <small>You can listen to generic changes using the <em>'change'</em> event type or specific attribute changes using <em>'change:attributeName'</em>.</small>
                <pre><code data-trim class="javascript">
var Todo = Backbone.Model.extend({
    defaults: {
        title: '',
        completed: false
    }
});

var todo1 = new Todo();
todo1.on('change', function() { /* handle any model change */ });
todo1.on('change:title', function() { /* handle title changes */ });
                </code></pre>
            </section>
        </section>


        <section data-background="#B2B6E4">
            <h2>Exercise 3 - Backbone Model</h2>
            <br>
            <small>
                Write a simple Notes Backbone model
            </small>
        </section>

<!------------------ Backbone / View ------------------>

        <section>
            <section>
                <h2>Backbone.js</h2>
                <br>
                <h5><a href="http://backbonejs.org/#View" target="_blank">View</a></h5>
            </section>
            <section>
                <h3>View - Properties</h3>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    // id property
    id: 'main',

    // el property
    // - by default an empty div is created
    // - you can set it to any HTML type like ul, li, input etc. or
    // - also a CSS selector can be used
    //   to associate this view with an existing DOM element
    //   e.g. #main-container
    // - a cached jQuery object $el is also available on the view
    //   instance e.g. this.$el.width()
    el: 'div',

    // this will result in <div id="main"></div>
    ...
});
                </code></pre>
            </section>
            <section>
                <h3>View - Properties II</h3>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    // className property
    // - apply these classes on the el dom element
    // - by default empty list
    className: 'main-view vbox'

    // attributes hash or function which returns a hash
    // - apply these attributes on the el dom element
    // - by default empty
    attributes: {
        "data-main" : "true",
        "my-attr" : "4711"
    },

    // this will result in
    // <div class="main-view vbox" data-main="true" my-attr="4711"></div>
    ...
});
                </code></pre>
            </section>

            <section>
                <h3>View - DOM Events</h3>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    // events hash or function which returns a events hash
    // following syntax is expected
    // "DOMEventType CSSSelector" : "onEventHandler"
    events: {
        'click li[data-index]' : 'onDeleteItemClick',

        // inline event handler
        'focus .input-item' : function(event) {
            alert("Focus Gained " + event.target);
        },
    },
    // the DOM event is passed as an argument to this function
    onDeleteItemClick : function(event) {
        // handle delete event
    }
});
                </code></pre>
            </section>
            <section>
                <h3>View - DOM Events II</h3>
                <br>
                <pre><code data-trim class="javascript">
var DocumentView = Backbone.View.extend({

    events: {
        "dblclick"                : "open",
        "click .icon.doc"         : "select",
        "contextmenu .icon.doc"   : "showMenu",
        "click .show_notes"       : "toggleNotes",
        "click .title .lock"      : "editAccessLevel",
        "mouseover .title .date"  : "showTooltip"
    },

    open: function() {
        window.open(this.model.get("viewer_url"));
    },

    select: function() {
        this.model.set({selected: true});
    },

    ...

});
                </code></pre>
            </section>
            <section>
                <h3>View - custom <em>initialize()</em></h3>
                <br>
                <small>Override <em>initialize()</em> to initializes the view.</small>
                <br>
 <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({
     ...
     initialize: function(options) {
        options = options || {};

        // custom view property passed to the view constructor
        // needs to be assigned manually
        this.title = options.title;

        // custom JSON object passed to the constructor
        this.data = options.data;

        // if passed is set by default by the view
        this.model = options.model;

        // if passed is set by default by the view
        this.collection = options.collection;
     }
});

var view = new MyView({
    model: myModel,
    collection: myCollection,
    title: "My View"
});
                </code></pre>
            </section>

            <section>
                <h3>View - Custom <em>render()</em></h3>
                <br>
                <small>Override <em>render()</em> with your code that renders the view and update <em>this.$el</em> with the new HTML.</small>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    ...

    render: function() {
        this.$el.html('&lt;div&gt;I'm the template&lt;/div&gt;');
        return this; // enable chained calls
    }

    ...
});
                </code></pre>
            </section>

            <section>
                <h3>View - Templates</h3>
                <br>
                <small>Define a view template and render template from model data.</small>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    // template property
    // - can be a compiled template function or a selector to a template
    template: _.template(…),

    render: function() {
        // invoke the compiled template with the model attributes
        var html = this.template(this.model.toJSON());
        // or with a simple JSON object
        var html = this.template({ title: 'My Title' });
        // set the generated html on the $el element
        this.$el.html(html);
        return this;
    }

});
        </code></pre>
            </section>
            <section>
                <h3>View - Model binding</h3>
                <br>
                <small>Instead of updating the HTML by hand, you can bind your view's render function to the model's <em>'change'</em> event.</small>
                <br>
                <pre><code data-trim class="javascript">
var MyView = Backbone.View.extend({

    initialize: function() {
        // bind model changes to view updates
        this.listenTo(this.model, "change", this.render);
    }

    render: function() {
        // some implementation
    }

});
                </code></pre>
            </section>
        </section>

        <section data-background="#B2B6E4">
            <h2>Exercise 4 - Backbone View</h2>
            <br>
            <small>
                Write a simple Backbone view
            </small>
        </section>

<!------------------ Backbone / Controller ------------------>

        <section>
            <section>
                <h2>Backbone.js</h2>
                <br>
                <h5><a href="http://addyosmani.github.io/backbone-fundamentals/#controllers" target="_blank">Controller</a></h5>
            </section>
            <section>
                <h3>Controller</h3>
                <br>
                <p>
                    <small>
                        Backbone.js does not have dedicated Controllers.
                        Backbone’s Views typically contain Controller logic, and Routers are used to help manage application state.
                        However classical controller can be easily emulated.
                    </small>
                </p>
                <br>
                <h5>Custom Controller</h5>
                <pre><code data-trim class="javascript">
var Controller = function (options) {
    this.inputView = options.inputView;
    this.collection = options.collection;
    this.initialize();
};

_.extend(Controller.prototype, Backbone.Events, {

    initialize: function() {
        this.inputView.render();

        this.listenTo(this.inputView, "add", this.onNoteAdd);
    },

    onNoteAdd: function(item) {
        // ...
    }

});
                </code></pre>
            </section>
        </section>

        <section data-background="#B2B6E4">
            <h2>Exercise 5 - Backbone MVC</h2>
            <br>
            <small>
                Extend the existing MVC example with a delete action
            </small>
        </section>

<!------------------ Backbone / LayoutManager ------------------>

        <section>
            <section>
                <h2>Backbone.js</h2>
                <br>
                <h5><a href="https://github.com/tbranyen/backbone.layoutmanager" target="_blank">LayoutManager</a></h5>
            </section>
            <section>
                <h3>LayoutManager</h3>
                <br>
                <h5>Backbone.js plugin that provides:</h5>
                <br>
                <ul>
                    <li>full template lifecycle</li>
                    <li>layout structuring</li>
                    <li>ensuring proper cleanup for all Views</li>
                    <li>control of your nested Views</li>
                    <li>concise API</li>
                </ul>
            </section>
            <section>
                <h3>LayoutManager</h3>
                <br>
                <h5>Example</h5>
                <pre><code data-trim class="javascript">
var LoginView = Backbone.Layout.extend({
    template: "#login-template"
});

var main = new Backbone.Layout({
    template: "#main-layout",

    // In the secondary column, put a new Login View.
    views: {
        ".secondary": new LoginView()
    }
});
                </code></pre>
            </section>
            <section>
                <h3>LayoutManager - Nested Views</h3>
                <br>
                <h5>Nested Views</h5>
                <pre><code data-trim class="javascript">
// declarative using 'views' property
Backbone.Layout.extend({
    views: {
        "header": new HeaderView(),
        "section": new ContentView(),
        "footer": new FooterView()
    }
});

// dynamically setting views
myLayout.setView("header", new HeaderView());

// ... inserting views
myLayout.insertView(new ListItemView());

// ... removing views
myLayout.removeView(".some-selector");
                </code></pre>
            </section>
        </section>

<!------------------ Deferreds ------------------>

        <section>
            <section>
                <h2>Deferreds and Promises</h2>
                <br>
                <h5><a href="http://api.jquery.com/category/deferred-object/" target="_blank">jQuery Deferred</a></h5>
            </section>
            <section>
                <h3>jQuery Deferreds</h3>
                <br>
                <p>
                    <small>
                        The Deferred object is a <strong>chainable</strong> utility object created by calling the <strong>jQuery.Deferred()</strong> method.
                        It can register multiple callbacks into <strong>callback queues</strong>, invoke callback queues,
                        and <strong>relay the success or failure state</strong> of any synchronous or asynchronous function.
                    </small>
                </p>
            </section>
            <section>
                <h3>Deferreds</h3>
                <br>
                <h5>Callback replacement</h5>
                <pre><code data-trim class="javascript">
// implementation using callbacks
$.ajax({
    url: "/myServerScript",
    success: mySuccessFunction,
    error: myErrorFunction
});
                </code></pre>
                <pre><code data-trim class="javascript">
// promise based implementation
var promise = $.ajax({
    url: "/myServerScript"
});
 
promise.done(myStopAnimationFunction);
promise.done(myOtherAjaxFunction);
promise.done(myShowInfoFunction);
promise.fail(myErrorFunction);
                </code></pre>
            </section>
            <section>
                <h3>Deferreds</h3>
                <br>
                <h5>Waiting for multiple promises</h5>
                <pre><code data-trim class="javascript">
var promise1 = $.ajax("/myServerScript1");
var promise2 = $.ajax("/myServerScript2");

$.when(promise1, promise2).done(function(res1, res2){
    // both responses are available
});
                </code></pre>
            </section>
            <section>
                <h3>Deferreds</h3>
                <br>
                <h5>Chaining promises</h5>
                <pre><code data-trim class="javascript">
var promise1 = $.ajax("/myServerScript1");
 
function getStuff() {
    return $.ajax("/myServerScript2");
}
 
promise1.then(getStuff).then(function(myServerScript2Data){
    // Both promises are resolved
});
                </code></pre>
            </section>

            <section>
                <h3>Deferreds</h3>
                <br>
                <h5>Define your own deferred API</h5>
                <pre><code data-trim class="javascript">
var async = function() {
    var dfd = $.Deferred();

    // notify progress after 0.5 second
    setTimeout(function() {
        dfd.notify("progress information");
    }, 500);

    // resolve deferred after 1 second
    setTimeout(function() {
        dfd.resolve("result");
    }, 1000);

    return dfd.promise();
}
 
async().progress(function(update) {
    console.log(update); // prints "progress information"
}).then(function(result){
    console.log(result); // prints "result" when async function returns
});
                </code></pre>
            </section>

            <section>
                <h3>Deferreds</h3>
                <br>
                <h5>Sync a collection of deferred objects</h5>
                <pre><code data-trim class="javascript">
var async = function() {
    var dfd = $.Deferred();

    // resolve deferred between 1ms and 1000ms
    setTimeout(function() {
        dfd.resolve();
    }, Math.floor((Math.random() * 1000) + 1));

    return dfd.promise();
}

var deferreds = [];

// create 100 async tasks
for(var i = 0; i < 100; i++) {
    deferreds.push(async());
}

$.when.apply(null, deferreds).then(function () {
    console.log("all async operations has finished");
});

                </code></pre>
            </section>

        </section>

<!------------------ Cordova Intro ------------------>

        <section>
            <section>
                <h2>Cordova / PhoneGap</h2>
                <br>
                <h5><a href="http://cordova.apache.org/" target="_blank">Apache Cordova</a></h5>
            </section>
            <section>
                <h3>Cordova - Use Cases</h3>
                <br>
                <ul>
                    <li>Native Packaging</li>
                    <li>Device API Access</li>
                    <li>Native Plattform Access</li>
                </ul>
            </section>
            <section>
                <h3>Cordova - Use Cases</h3>
                <br>
                <h5>Native Packaging</h5>
                <br>
                <ul>
                    <li>Distribution (Appstore)</li>
                    <li>Monetization (Appstore)</li>
                    <li>Offline availability</li>
                </ul>
            </section>
            <section>
                <h3>Cordova - Use Cases</h3>
                <br>
                <h5><a href="http://docs.phonegap.com/en/3.0.0/index.html" target="_blank">Device API Access</a></h5>
                <br>
                <ul>
                    <li>Device Info, Contacts, File System</li>
                    <li>Compass, Accelerometer, ...</li>
                    <li>Notification, Events</li>
                    <li>InApp Browser</li>
                </ul>
            </section>
            <section>
                <h3>Cordova - Anti Use Cases</h3>
                <br>
                <h5><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5" target="_blank">Covered by HTML5 API</a></h5>
                <br>
                <ul>
                    <li>Camera</li>
                    <li>GPS, Device orientation</li>
                    <li>Online/Offline detection</li>
                    <li>WebSQL, IndexedDB</li>
                    <li>Web Workers</li>
                    <li>Web Sockets</li>
                    <li>Canvas, WebGL, SVG</li>
                </ul>
            </section>
            <section>
                <h3>Cordova - Use Cases</h3>
                <br>
                <h5>Native Plattform Access</h5>
                <br>
                <ul>
                    <li>Security</li>
                    <li>Performance</li>
                    <li>Native components</li>
                </ul>
            </section>
        </section>

<!------------------ Cordova Setup / Usage ------------------>

        <section>
            <section>
                <h2>Cordova Setup / Usage</h2>
                <br>
                <h5><a href="http://cordova.apache.org/docs/en/3.0.0/guide_cli_index.md.html#The%20Command-line%20Interface" target="_blank">Cordova - Command Line Interface</a></h5>
                <h5><a href="http://docs.phonegap.com/en/3.0.0/guide_cli_index.md.html#The%20Command-line%20Interface" target="_blank">Phonegap - Command Line Interface</a></h5>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Setup</h5>
                <pre><code data-trim>
npm install -g cordova
                </code></pre>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Create new project</h5>
                <pre><code data-trim>
cordova create hello com.example.hello HelloWorld
                </code></pre>
                <ul>
                    <li><strong>hello</strong> - directory name</li>
                    <li><strong>com.example.hello</strong> - package name</li>
                    <li><strong>HelloWorld</strong> - app display text</li>
                </ul>
                <br>
                <p>
                    <small>See <strong>config.xml</strong> for later changes during development.</small>
                </p>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Directory structure</h5>
                <pre><code data-trim>
hello/
|--.cordova/
|-- merges/
| | |-- android/
| | |-- blackberry10/
| | `-- ios/
|-- www/
| `-- config.xml
|-- platforms/
| |-- android/
| |-- blackberry10/
| `-- ios/
`-- plugins/
                </code></pre>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Add plattform</h5>
                <pre><code data-trim>
cordova platform add ios|android
                </code></pre>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Build specific platform</h5>
                <pre><code data-trim>
cordova build ios
                </code></pre>
                <p><small>
                Alternative:
                </small></p>
                <pre><code data-trim>
cordova prepare ios
cordova compile ios
                </code></pre>
            </section>
            <section>
                <h3>Cordova</h3>
                <br>
                <h5>Add a plugin</h5>
                <pre><code data-trim>
cordova plugin add https://git-wip-us.apache.org/repos/asf/cordova-plugin-device.git
                </code></pre>
                <br>
                <h5>List installed plugins</h5>
                <pre><code data-trim>
cordova plugin ls
                </code></pre>
            </section>
        </section>

<!------------------ Hammer.js ------------------>

    <section>
        <section>
            <h2>Hammer.js</h2>
            <br>
            <ul>
                <li>Lightweight standalone multi-touch events library</li>
                <li>Implements most common gestures and touch events: <strong>Tap, DoubleTap, Swipe, Drag, Pinch, and Rotate</strong></li>
                <li>Supports most mobile <a href="https://github.com/EightMedia/hammer.js/wiki/Compatibility" target="_blank">web browsers</a></li>
                <li>Easy to use with Backbone, jQuery etc.</li>
            </ul>
        </section>

        <section>
            <h2>Hammer.js - Demo</h2>
        </section>

    </section>


<!------------------ Continuous Integration etc. ------------------>

    <section>
        <section>
            <h2>Continuous Integration of JavaScript Projects with</h2>
            <br>
            <h5><a href="http://nodejs.org" target="_blank">Node.js</a></h5>
            <h5><a href="http://bower.io" target="_blank">Bower.js</a></h5>
            <h5><a href="http://gruntjs.com" target="_blank">Grunt.js</a></h5>
            <h5><a href="http://busterjs.org" target="_blank">Buster.js</a></h5>
            <h5><a href="http://phantomjs.org" target="_blank">Phantom.js</a></h5>
        </section>

        <section>

            <h2>Bower.js</h2>
            <br/>
            <ul>
                <li><a href="http://bower.io" target="_blank">Bower.js</a> is a package manager for <strong>client side libraries</strong></li>
                <li>Dependencies are defined in a file called <strong>'package.json'</strong></li>
                <li>Custom configuration can be done in a local file called <strong>'.bowerrc'</strong></li>
                <li>Dependencies are defined in a file called <strong>'package.json'</strong></li>
            </ul>
        </section>

        <section>
            <h2>Bower.js II - Basic Usage</h2>
            <br/>
            <ul>
                <li>Install Bower package: <strong>bower install jquery --save</strong></li>
                <li>Remove Bower package: <strong>bower uninstall jquery --save</strong></li>
                <li>Or manually make an entry into package.json file</li>
            </ul>

             <pre><code data-trim class="javascript">
{
    "name"        : "90-exercise-ci",
    "version"     : "1.0.0",
    "dependencies": {
        "requirejs"     : "~2.1.8",
        "requirejs-text": "~2.0.10"
        "backbone"      : "~1.0.0",
        "underscore"    : "~1.4.4",
        "moment"        : "~2.1.0",
        "movejs"        : "[GitHub Repository URL]#~0.1.1",
        "layoutmanager" : "~0.9.2",
    },
    "resolutions" : {
        "underscore": "1.4.4"
    }
}
             </code></pre>

        </section>

        <section>
            <h2>Phantom.js</h2>
            <br>
            <p>Headless WebKit browser which works great with Node.js</p>
            <br>

            <h2>grunt-buster</h2>
            <br>
            <p>The <a href="https://npmjs.org/package/grunt-buster" target="_blank">grunt-buster</a> plugin runs buster test cases in phantomjs</p>
        </section>

        <section>
            <h2>Quality Assurance</h2>
            <br>
            <p><a href="http://gotwarlost.github.io/istanbul/" target="_blank">Istanbul.js</a> Javascript code coverage tool</p>
            <br>

            <h2>buster-istanbul</h2>
            <br>
            <p>The <a href="https://github.com/englishtown/buster-istanbul" target="_blank">buster-istanbul</a> uses istanbul.js to create code coverage reports on Buster.js test cases</p>
        </section>
        <section>
            <h2>CI - Demo</h2>
        </section>

    </section>

    </div>

</div>

<script src="revealjs/lib/js/head.min.js"></script>
<script src="revealjs/js/reveal.min.js"></script>

<script>

    Reveal.initialize({

        history: true,

        // Enable the slide overview mode
        overview: true,
        // default transition
        transition: 'linear',

        dependencies: [
            { src: 'revealjs/lib/js/classList.js', condition: function() { return !document.body.classList; } },
            { src: 'revealjs/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'revealjs/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'revealjs/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
            { src: 'revealjs/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
            { src: 'revealjs/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
            // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
            // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]

    });

</script>

</body>
</html>
